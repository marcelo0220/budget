<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Budget Pro</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    :root {
      --primary: linear-gradient(135deg, #1a237e 0%, #3f51b5 100%);
      --accent: #ffd700;
      --bg-dark: #0a0e27;
      --bg-light: #f5f7fa;
      --glass-dark: rgba(255,255,255,0.1);
      --glass-light: rgba(255,255,255,0.95);
      --text-dark: #ffffff;
      --text-light: #1a237e;
      --shadow: 0 20px 40px rgba(0,0,0,0.1);
      --transition: 0.3s cubic-bezier(0.4,0,0.2,1);
    }
    
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #0a0e27 0%, #1a237e 50%, #2c3e78 100%);
      color: var(--text-dark);
      overflow-x: hidden;
      min-height: 100vh;
      transition: var(--transition);
    }
    
    body.light {
      background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 50%, #90caf9 100%);
      color: var(--text-light);
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 0;
      margin-bottom: 30px;
    }
    
    h1 {
      font-size: 28px;
      font-weight: 700;
      background: linear-gradient(135deg, #fff 0%, var(--accent) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    body.light h1 {
      background: linear-gradient(135deg, #1a237e 0%, #3f51b5 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .theme-toggle {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--glass-dark);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255,255,255,0.2);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }
    
    body.light .theme-toggle {
      background: rgba(26,35,126,0.15);
      border: 1px solid rgba(26,35,126,0.2);
    }
    
    .theme-toggle:hover { transform: scale(1.1) rotate(15deg); }
    
    .balance-card {
      background: var(--glass-dark);
      backdrop-filter: blur(20px);
      border-radius: 24px;
      padding: 40px;
      margin-bottom: 30px;
      box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,0.2);
      position: relative;
      overflow: hidden;
    }
    
    body.light .balance-card {
      background: rgba(255,255,255,0.85);
      backdrop-filter: blur(30px);
      border: 1px solid rgba(26,35,126,0.15);
      box-shadow: 0 20px 60px rgba(26,35,126,0.15);
    }
    
    .balance-card::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,215,0,0.15) 0%, transparent 70%);
      animation: pulse 4s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 0.5; }
      50% { transform: scale(1.1); opacity: 0.8; }
    }
    
    .balance-label {
      font-size: 14px;
      opacity: 0.7;
      margin-bottom: 10px;
      font-weight: 600;
    }
    
    .balance-amount {
      font-size: 56px;
      font-weight: 700;
      margin-bottom: 20px;
      background: linear-gradient(135deg, #fff 0%, var(--accent) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    body.light .balance-amount {
      background: linear-gradient(135deg, #1a237e 0%, #3f51b5 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin-bottom: 30px;
    }
    
    .stat-card {
      background: var(--glass-dark);
      backdrop-filter: blur(20px);
      border-radius: 16px;
      padding: 20px;
      border: 1px solid rgba(255,255,255,0.2);
      transition: var(--transition);
    }
    
    body.light .stat-card {
      background: rgba(255,255,255,0.85);
      backdrop-filter: blur(30px);
      border: 1px solid rgba(26,35,126,0.15);
      box-shadow: 0 10px 30px rgba(26,35,126,0.1);
    }
    
    .stat-card:hover { transform: translateY(-5px); box-shadow: var(--shadow); }
    
    .stat-label {
      font-size: 12px;
      opacity: 0.7;
      margin-bottom: 8px;
      font-weight: 600;
    }
    
    .stat-value {
      font-size: 24px;
      font-weight: 600;
    }
    
    .stat-value.positive { color: #4ecdc4; }
    .stat-value.negative { color: #ff6b6b; }
    
    .actions {
      display: flex;
      gap: 15px;
      margin-bottom: 30px;
    }
    
    .btn {
      flex: 1;
      padding: 16px;
      border: none;
      border-radius: 16px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .btn-primary {
      background: var(--primary);
      color: #fff;
      box-shadow: 0 10px 30px rgba(26,35,126,0.4);
    }
    
    .btn-primary:hover { transform: scale(1.02); box-shadow: 0 15px 40px rgba(26,35,126,0.6); }
    
    .btn-secondary {
      background: var(--glass-dark);
      backdrop-filter: blur(20px);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.2);
    }
    
    body.light .btn-secondary {
      background: rgba(26,35,126,0.1);
      color: #1a237e;
      border: 1px solid rgba(26,35,126,0.2);
    }
    
    .btn-secondary:hover { background: rgba(255,255,255,0.15); }
    
    body.light .btn-secondary:hover { background: rgba(26,35,126,0.15); }
    
    .search-box {
      background: var(--glass-dark);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 16px;
      padding: 14px 20px;
      margin-bottom: 20px;
      font-size: 16px;
      width: 100%;
      color: #fff;
      font-family: 'Inter', sans-serif;
    }
    
    body.light .search-box {
      background: rgba(255,255,255,0.9);
      border: 2px solid rgba(26,35,126,0.2);
      color: #1a237e;
    }
    
    .search-box::placeholder { color: rgba(255,255,255,0.5); }
    body.light .search-box::placeholder { color: rgba(26,35,126,0.5); }
    
    .transactions {
      background: var(--glass-dark);
      backdrop-filter: blur(20px);
      border-radius: 24px;
      padding: 30px;
      border: 1px solid rgba(255,255,255,0.2);
    }
    
    body.light .transactions {
      background: rgba(255,255,255,0.85);
      backdrop-filter: blur(30px);
      border: 1px solid rgba(26,35,126,0.15);
      box-shadow: 0 20px 60px rgba(26,35,126,0.1);
    }
    
    .transaction-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      background: rgba(255,255,255,0.05);
      border-radius: 12px;
      margin-bottom: 12px;
      transition: var(--transition);
      cursor: pointer;
    }
    
    body.light .transaction-item {
      background: rgba(26,35,126,0.05);
    }
    
    .transaction-item:hover { 
      background: rgba(255,255,255,0.1);
      transform: translateX(5px);
    }
    
    body.light .transaction-item:hover { 
      background: rgba(26,35,126,0.1);
    }
    
    .transaction-info {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .transaction-icon {
      width: 50px;
      height: 50px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }
    
    .transaction-details h4 {
      font-size: 16px;
      margin-bottom: 4px;
    }
    
    .transaction-date {
      font-size: 12px;
      opacity: 0.6;
    }
    
    .transaction-amount {
      font-size: 20px;
      font-weight: 600;
    }
    
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      backdrop-filter: blur(10px);
      z-index: 1000;
      align-items: flex-end;
      animation: fadeIn 0.3s;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .modal-content {
      background: var(--glass-light);
      backdrop-filter: blur(30px);
      border-radius: 24px 24px 0 0;
      padding: 30px;
      width: 100%;
      max-width: 600px;
      margin: 0 auto;
      animation: slideUp 0.3s;
    }
    
    @keyframes slideUp {
      from { transform: translateY(100%); }
      to { transform: translateY(0); }
    }
    
    .modal h2 {
      font-size: 24px;
      margin-bottom: 20px;
      color: #1a237e;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-size: 14px;
      color: #1a237e;
      font-weight: 600;
    }
    
    .form-group input, .form-group select {
      width: 100%;
      padding: 14px;
      border: 2px solid rgba(26,35,126,0.2);
      border-radius: 12px;
      font-size: 16px;
      background: rgba(255,255,255,0.9);
      color: #1a237e;
      transition: var(--transition);
      font-family: 'Inter', sans-serif;
    }
    
    .form-group input:focus, .form-group select:focus {
      outline: none;
      border-color: #3f51b5;
    }
    
    .category-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      margin-top: 10px;
    }
    
    .category-btn {
      padding: 15px;
      border: 2px solid rgba(26,35,126,0.2);
      border-radius: 12px;
      background: rgba(255,255,255,0.9);
      cursor: pointer;
      transition: var(--transition);
      font-size: 24px;
      text-align: center;
    }
    
    .category-btn.active {
      border-color: #3f51b5;
      background: rgba(63,81,181,0.1);
      transform: scale(1.05);
    }
    
    .toast {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: var(--glass-dark);
      backdrop-filter: blur(20px);
      padding: 20px 30px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.2);
      box-shadow: var(--shadow);
      animation: slideIn 0.3s;
      z-index: 2000;
      color: #fff;
    }
    
    body.light .toast {
      background: rgba(26,35,126,0.95);
      border: 1px solid rgba(26,35,126,0.3);
    }
    
    @keyframes slideIn {
      from { transform: translateX(400px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    @media (max-width: 768px) {
      .balance-amount { font-size: 42px; }
      .stats-grid { grid-template-columns: repeat(2, 1fr); }
      .category-grid { grid-template-columns: repeat(3, 1fr); }
      h1 { font-size: 24px; }
    }

    #logo img {
      height: 40px;
      vertical-align: middle;
      margin-right: 10px;
      border-radius: 50%;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1><span id="logo"><img src="logo.png" alt=""></span> Budget Pro</h1>
      <button class="theme-toggle" onclick="toggleTheme()">üåô</button>
    </header>
    
    <div class="balance-card">
      <div class="balance-label">Solde actuel</div>
      <div class="balance-amount" id="balance">0 Ar</div>
      <div id="miniChart"></div>
    </div>
    
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-label">Revenus</div>
        <div class="stat-value positive" id="income">0 Ar</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">D√©penses</div>
        <div class="stat-value negative" id="expenses">0 Ar</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Ce mois</div>
        <div class="stat-value" id="monthly">0 Ar</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Transactions</div>
        <div class="stat-value" id="count">0</div>
      </div>
    </div>
    
    <div class="actions">
      <button class="btn btn-primary" onclick="openModal()">‚ûï Ajouter</button>
      <button class="btn btn-secondary" onclick="exportData()">üìä Export</button>
    </div>
    
    <input type="text" class="search-box" placeholder="üîç Rechercher une transaction..." id="search" oninput="filterTransactions()">
    
    <div class="transactions">
      <h3 style="margin-bottom: 20px;">Transactions r√©centes</h3>
      <div id="transactionsList"></div>
    </div>
  </div>
  
  <div class="modal" id="modal">
    <div class="modal-content">
      <h2>Nouvelle transaction</h2>
      <form onsubmit="addTransaction(event)">
        <div class="form-group">
          <label>Type</label>
          <select id="type" onchange="updateCategories()">
            <option value="expense">D√©pense</option>
            <option value="income">Revenu</option>
          </select>
        </div>
        <div class="form-group">
          <label>Montant (Ar)</label>
          <input type="number" id="amount" step="1" required>
        </div>
        <div class="form-group">
          <label>Description</label>
          <input type="text" id="description" required>
        </div>
        <div class="form-group">
          <label>Cat√©gorie</label>
          <div class="category-grid" id="categories"></div>
        </div>
        <div style="display: flex; gap: 15px; margin-top: 30px;">
          <button type="submit" class="btn btn-primary">‚úÖ Valider</button>
          <button type="button" class="btn btn-secondary" onclick="closeModal()">‚ùå Annuler</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    const categories = {
      expense: [
        {icon: 'üçî', name: 'Nourriture', color: '#ff6b6b'},
        {icon: 'üöó', name: 'Transport', color: '#4ecdc4'},
        {icon: 'üè†', name: 'Logement', color: '#95e1d3'},
        {icon: 'üéÆ', name: 'Loisirs', color: '#a8e6cf'},
        {icon: 'üõçÔ∏è', name: 'Shopping', color: '#ffd93d'},
        {icon: 'üíä', name: 'Sant√©', color: '#ff8a80'}
      ],
      income: [
        {icon: 'üí∞', name: 'Salaire', color: '#4ecdc4'},
        {icon: 'üí∏', name: 'Freelance', color: '#95e1d3'},
        {icon: 'üéÅ', name: 'Cadeau', color: '#ffd93d'},
        {icon: 'üìà', name: 'Investissement', color: '#a8e6cf'}
      ]
    };
    
    let transactions = JSON.parse(localStorage.getItem('transactions') || '[]');
    let selectedCategory = null;
    
    function formatAriary(amount) {
      return new Intl.NumberFormat('fr-FR', {
        minimumFractionDigits: 0,
        maximumFractionDigits: 0
      }).format(amount) + ' Ar';
    }
    
    function updateCategories() {
      const type = document.getElementById('type').value;
      const grid = document.getElementById('categories');
      grid.innerHTML = categories[type].map((cat, i) => 
        `<div class="category-btn" onclick="selectCategory(${i})" data-index="${i}">${cat.icon}</div>`
      ).join('');
      selectedCategory = null;
    }
    
    function selectCategory(index) {
      document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active'));
      document.querySelector(`[data-index="${index}"]`).classList.add('active');
      selectedCategory = index;
    }
    
    function addTransaction(e) {
      e.preventDefault();
      const type = document.getElementById('type').value;
      const amount = parseFloat(document.getElementById('amount').value);
      const description = document.getElementById('description').value;
      
      if (selectedCategory === null) {
        showToast('‚ö†Ô∏è S√©lectionnez une cat√©gorie');
        return;
      }
      
      const category = categories[type][selectedCategory];
      const transaction = {
        id: Date.now(),
        type,
        amount: type === 'expense' ? -amount : amount,
        description,
        category: category.name,
        icon: category.icon,
        color: category.color,
        date: new Date().toISOString()
      };
      
      transactions.unshift(transaction);
      localStorage.setItem('transactions', JSON.stringify(transactions));
      
      closeModal();
      renderTransactions();
      updateStats();
      showToast('‚úÖ Transaction ajout√©e !');
      
      document.getElementById('type').value = 'expense';
      document.getElementById('amount').value = '';
      document.getElementById('description').value = '';
    }
    
    function renderTransactions() {
      const list = document.getElementById('transactionsList');
      const search = document.getElementById('search').value.toLowerCase();
      
      const filtered = transactions.filter(t => 
        t.description.toLowerCase().includes(search) || 
        t.category.toLowerCase().includes(search)
      );
      
      list.innerHTML = filtered.map(t => `
        <div class="transaction-item" onclick="deleteTransaction(${t.id})">
          <div class="transaction-info">
            <div class="transaction-icon" style="background: ${t.color}20">
              ${t.icon}
            </div>
            <div class="transaction-details">
              <h4>${t.description}</h4>
              <div class="transaction-date">${new Date(t.date).toLocaleDateString('fr-FR')} ‚Ä¢ ${t.category}</div>
            </div>
          </div>
          <div class="transaction-amount" style="color: ${t.amount > 0 ? '#4ecdc4' : '#ff6b6b'}">
            ${t.amount > 0 ? '+' : ''}${formatAriary(Math.abs(t.amount))}
          </div>
        </div>
      `).join('') || '<p style="text-align: center; opacity: 0.5;">Aucune transaction</p>';
    }
    
    function updateStats() {
      const balance = transactions.reduce((sum, t) => sum + t.amount, 0);
      const income = transactions.filter(t => t.amount > 0).reduce((sum, t) => sum + t.amount, 0);
      const expenses = Math.abs(transactions.filter(t => t.amount < 0).reduce((sum, t) => sum + t.amount, 0));
      
      animateValue('balance', balance);
      document.getElementById('income').textContent = formatAriary(income);
      document.getElementById('expenses').textContent = formatAriary(expenses);
      document.getElementById('monthly').textContent = formatAriary(balance);
      document.getElementById('count').textContent = transactions.length;
    }
    
    function animateValue(id, value) {
      const el = document.getElementById(id);
      const duration = 1000;
      const start = parseFloat(el.textContent.replace(/[^\d-]/g, '')) || 0;
      const startTime = performance.now();
      
      function update(currentTime) {
        const elapsed = currentTime - startTime;
        const progress = Math.min(elapsed / duration, 1);
        const current = start + (value - start) * progress;
        el.textContent = formatAriary(Math.round(current));
        
        if (progress < 1) requestAnimationFrame(update);
      }
      requestAnimationFrame(update);
    }
    
    function deleteTransaction(id) {
      if (confirm('Supprimer cette transaction ?')) {
        transactions = transactions.filter(t => t.id !== id);
        localStorage.setItem('transactions', JSON.stringify(transactions));
        renderTransactions();
        updateStats();
        showToast('üóëÔ∏è Transaction supprim√©e');
      }
    }
    
    function filterTransactions() {
      renderTransactions();
    }
    
    function openModal() {
      document.getElementById('modal').style.display = 'flex';
      updateCategories();
    }
    
    function closeModal() {
      document.getElementById('modal').style.display = 'none';
    }
    
    function toggleTheme() {
      document.body.classList.toggle('light');
      const btn = document.querySelector('.theme-toggle');
      btn.textContent = document.body.classList.contains('light') ? '‚òÄÔ∏è' : 'üåô';
      localStorage.setItem('theme', document.body.classList.contains('light') ? 'light' : 'dark');
    }
    
    function showToast(message) {
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 3000);
    }
    
    function exportData() {
      const data = JSON.stringify(transactions, null, 2);
      const blob = new Blob([data], {type: 'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `budget-${new Date().toISOString().split('T')[0]}.json`;
      a.click();
      showToast('üì• Donn√©es export√©es');
    }
    
    // Initialize
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'light') {
      document.body.classList.add('light');
      document.querySelector('.theme-toggle').textContent = '‚òÄÔ∏è';
    }
    
    renderTransactions();
    updateStats();
  </script>
</body>
</html>