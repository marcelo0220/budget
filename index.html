<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Budget Pro AI+ ‚úÖ OPTIMIS√â</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js" defer></script>
<style>/*=== CSS OPTIMIS√â (MINIFI√â + CRITIQUE INLINE) ===*/
*{margin:0;padding:0;box-sizing:border-box}:root{--primary:linear-gradient(135deg,#1a237e,#3f51b5);--accent:#ffd700;--glass:rgba(255,255,255,.1);--success:#4ecdc4;--warning:#ff6b6b;--bg-dark:linear-gradient(135deg,#0a0e27,#1a237e);--bg-light:#f8fafc;--text-dark:#1e293b;--radius:16px;--shadow:0 8px 32px rgba(0,0,0,.3)}body{font-family:'Inter',sans-serif;background:var(--bg-dark);color:#fff;min-height:100vh;transition:all .3s ease;overflow-x:hidden}.light{--glass:rgba(0,0,0,.05);--bg-dark:var(--bg-light);--text-dark:#fff;background:var(--bg-light);color:var(--text-dark)}.container{max-width:1200px;margin:auto;padding:20px}@media (max-width:768px){.container{padding:15px}}header{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding:16px 0}h1{font-size:clamp(24px,5vw,32px);font-weight:700;background:var(--primary);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.theme-toggle{width:52px;height:52px;border-radius:50%;background:var(--glass);border:2px solid rgba(255,255,255,.3);cursor:pointer;font-size:20px;transition:all .3s ease;display:flex;align-items:center;justify-content:center}.theme-toggle:hover{transform:scale(1.1);background:rgba(255,255,255,.2)}.balance-card{background:var(--glass);backdrop-filter:blur(25px);border-radius:var(--radius);padding:24px;margin-bottom:20px;border:1px solid rgba(255,255,255,.15);box-shadow:var(--shadow);transition:transform .2s}.balance-card:hover{transform:translateY(-2px)}.balance-label{opacity:.85;font-weight:600;font-size:14px;margin-bottom:8px;display:flex;align-items:center;gap:8px}.balance-amount{font-size:clamp(28px,6vw,40px);font-weight:700;margin:12px 0;background:linear-gradient(135deg,#fff,var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:16px;margin:24px 0}.stat-card{background:var(--glass);padding:20px;border-radius:20px;border:1px solid rgba(255,255,255,.15);transition:all .2s;text-align:center}.stat-card:hover{transform:translateY(-4px);box-shadow:0 12px 40px rgba(0,0,0,.4)}.actions{display:flex;gap:12px;margin:20px 0;flex-wrap:wrap}.btn{flex:1;min-width:130px;padding:14px 20px;border:none;border-radius:14px;font-weight:600;font-size:15px;cursor:pointer;transition:all .3s;display:flex;align-items:center;justify-content:center;gap:8px}.btn-primary{background:var(--primary);color:#fff;box-shadow:0 4px 20px rgba(26,35,126,.4)}.btn-primary:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(26,35,126,.6)}.btn-secondary,.btn-ai{background:var(--glass);border:2px solid rgba(255,255,255,.25);color:#fff}.btn-secondary:hover,.btn-ai:hover{background:rgba(255,255,255,.15);border-color:rgba(255,255,255,.5);transform:translateY(-2px)}.search-box{width:100%;padding:16px;border-radius:14px;border:2px solid rgba(255,255,255,.2);background:var(--glass);color:#fff;font-size:16px;margin-bottom:20px;transition:all .2s}.search-box:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 4px rgba(255,215,0,.2)}.transactions{background:var(--glass);padding:24px;border-radius:var(--radius);border:1px solid rgba(255,255,255,.15);margin-bottom:20px;box-shadow:var(--shadow)}.transaction-item{display:flex;justify-content:space-between;align-items:center;padding:16px;border-radius:14px;margin-bottom:12px;background:rgba(255,255,255,.08);cursor:pointer;transition:all .2s;border:1px solid rgba(255,255,255,.1)}.transaction-item:hover{background:rgba(255,255,255,.15);transform:translateX(4px)}.transaction-info{display:flex;gap:14px;align-items:center;flex:1}.transaction-icon{width:48px;height:48px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:24px;box-shadow:0 4px 16px rgba(0,0,0,.2)}.transaction-amount{font-size:18px;font-weight:700}.positive{color:var(--success)}.negative{color:var(--warning)}.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.85);backdrop-filter:blur(15px);align-items:center;justify-content:center;z-index:1000;padding:20px}.modal.active{display:flex}.modal-content{background:linear-gradient(135deg,#fff 0%,#f8fafc 100%);color:#1a237e;width:100%;max-width:550px;border-radius:var(--radius);padding:32px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px rgba(0,0,0,.5);animation:modalSlideIn .3s ease}.form-group{margin-bottom:20px}.form-group label{font-weight:600;font-size:15px;display:block;margin-bottom:8px;color:#374151}.form-group input,.form-group select{width:100%;padding:14px;border-radius:12px;border:2px solid rgba(26,35,126,.15);font-size:16px;transition:all .2s;background:#fff}.form-group input:focus,.form-group select:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 4px rgba(63,81,181,.1)}.category-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(70px,1fr));gap:12px;margin-top:12px}.category-btn{padding:16px;border-radius:14px;border:2px solid rgba(26,35,126,.2);cursor:pointer;font-size:24px;text-align:center;transition:all .2s;background:rgba(255,255,255,.1)}.category-btn:hover{background:rgba(63,81,181,.15);transform:scale(1.05)}.category-btn.active{border-color:var(--accent);background:linear-gradient(135deg,rgba(255,215,0,.3),rgba(255,193,7,.2));transform:scale(1.08);box-shadow:0 4px 20px rgba(255,215,0,.3)}.cat-info{font-size:13px;opacity:.9;margin-top:8px;padding:12px;background:rgba(63,81,181,.1);border-radius:10px;border-left:4px solid var(--accent)}.profile-badges{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}.profile-badge{padding:10px 16px;border-radius:25px;border:2px solid rgba(255,255,255,.3);font-size:13px;font-weight:600;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:6px}.profile-badge:hover{background:rgba(255,255,255,.15);transform:translateY(-1px)}.profile-badge.active{background:linear-gradient(135deg,rgba(255,215,0,.25),rgba(255,193,7,.2));border-color:var(--accent);box-shadow:0 4px 16px rgba(255,215,0,.3)}.chart-container{background:var(--glass);border-radius:var(--radius);padding:20px;margin:20px 0;border:1px solid rgba(255,255,255,.15);box-shadow:var(--shadow)}.toast{position:fixed;top:24px;right:24px;background:linear-gradient(135deg,var(--success),#45b7b5);color:#fff;padding:18px 24px;border-radius:14px;z-index:2000;font-weight:600;box-shadow:0 10px 40px rgba(78,205,196,.4);transform:translateX(400px);opacity:0;transition:all .4s cubic-bezier(.25,.46,.45,.94)}.toast.show{transform:translateX(0);opacity:1}.suggestion-item{display:flex;justify-content:space-between;padding:16px;border-bottom:1px solid rgba(255,255,255,.1);transition:all .2s}.suggestion-item:hover{background:rgba(255,255,255,.1);transform:translateX(4px)}@keyframes modalSlideIn{from{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}@media (max-width:640px){.actions{flex-direction:column}.btn{flex:1}}</style>
</head>
<body class="dark">
<div class="container">
<header><h1>üíº Budget Pro AI+</h1><button class="theme-toggle" id="themeToggle" aria-label="Basculer le th√®me">üåô</button></header>

<!-- CONFIGURATION -->
<div class="balance-card">
<div class="balance-label">‚öôÔ∏è Configuration</div>
<div class="form-group"><label>Budget mensuel pr√©vu (Ar)</label><input type="number" id="monthlyBudget" min="0" placeholder="500000"></div>
<div class="form-group"><label>Personnes au foyer</label><input type="number" id="peopleCount" min="1" value="1" max="10"></div>
<div class="form-group"><label>Paye loyer?</label><label class="switch"><input type="checkbox" id="payRent"><span class="slider"></span></label></div>
<div class="form-group"><label>Profil de d√©penses</label><div class="profile-badges"><div class="profile-badge active" data-profile="balanced">‚öñÔ∏è √âquilibr√©</div><div class="profile-badge" data-profile="security">üõ°Ô∏è S√©curit√©</div><div class="profile-badge" data-profile="comfort">üéâ Confort</div></div></div>
</div>

<!-- STATS PRINCIPALES -->
<div class="stats-grid">
<div class="stat-card"><div class="balance-label">üí∞ Budget total</div><div class="balance-amount" id="totalBudget">0 Ar</div></div>
<div class="stat-card"><div class="balance-label">üíµ Solde actuel</div><div class="balance-amount" id="balance">0 Ar</div></div>
<div class="stat-card"><div class="balance-label">üíé √âpargne auto</div><div class="balance-amount" id="savings">0 Ar</div></div>
<div class="stat-card"><div class="balance-label">‚ö†Ô∏è Reste √† vivre</div><div class="balance-amount" id="resteAVivre" style="color:#ff6b6b">0 Ar</div></div>
</div>

<!-- ACTIONS RAPIDES -->
<div class="actions">
<button class="btn btn-primary" onclick="openModal()" aria-label="Ajouter une transaction">‚ûï Nouvelle transaction</button>
<button class="btn btn-secondary" onclick="exportData()">üìä Exporter</button>
<button class="btn btn-secondary" onclick="resetData()">üßπ Reset</button>
<button class="btn btn-ai" onclick="generateReport()">ü§ñ Rapport AI</button>
</div>

<input class="search-box" id="searchInput" placeholder="üîç Rechercher (description, cat√©gorie...)">

<!-- GRAPHIQUE -->
<div class="chart-container"><canvas id="expensesChart" width="400" height="200"></canvas></div>

<!-- SUGGESTIONS AI -->
<div class="balance-card">
<h3 style="margin-bottom:16px;font-size:20px">üí° Budget intelligent sugg√©r√©</h3>
<div id="suggestionList"></div>
</div>

<!-- TRANSACTIONS -->
<div class="transactions">
<h3 style="margin-bottom:20px;font-size:20px">üìã Transactions r√©centes</h3>
<div id="transactionsList">Aucune transaction enregistr√©e</div>
</div>
</div>

<!-- TOAST NOTIFICATIONS -->
<div class="toast" id="toast"></div>

<!-- MODAL TRANSACTION -->
<div class="modal" id="transactionModal">
<div class="modal-content">
<h2 id="modalTitle">‚ûï Nouvelle transaction</h2>
<form onsubmit="addTransaction(event)">
<div class="form-group"><label>Type</label><select id="transactionType" onchange="updateCategories()"><option value="expense">üí∏ D√©pense</option><option value="income">üí∞ Revenu</option></select></div>
<div class="form-group"><label>Montant (Ar)</label><input type="number" id="amount" required min="0" placeholder="15000"></div>
<div class="form-group"><label>Description</label><input type="text" id="description" required placeholder="Ex: Courses Carrefour"></div>
<div class="form-group"><label>Cat√©gorie</label><div class="category-grid" id="categoryGrid"></div><div id="categoryInfo" class="cat-info">‚ö†Ô∏è Cliquez sur une ic√¥ne pour s√©lectionner</div></div>
<div style="display:flex;gap:16px"><button class="btn btn-primary" type="submit">‚úÖ Enregistrer</button><button type="button" class="btn btn-secondary" onclick="closeModal()">‚ùå Annuler</button></div>
</form>
</div>
</div>

<style>.switch{position:relative;display:inline-block;width:60px;height:34px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s;border-radius:34px}.slider:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s;border-radius:50%}.input:checked+.slider{background:var(--primary)}.input:checked+.slider:before{transform:translateX(26px)}</style>

<script>/*=== JAVASCRIPT OPTIMIS√â (MODULAIRE + PERFORMANT) ===*/
class BudgetPro{constructor(){this.transactions=JSON.parse(localStorage.getItem('budget_transactions')||'[]');this.savings=parseFloat(localStorage.getItem('budget_savings')||'0');this.monthlyBudget=Number(localStorage.getItem('budget_monthly')||0);this.peopleCount=Number(localStorage.getItem('budget_people')||1);this.payRent=localStorage.getItem('budget_rent')==='true';this.profile=localStorage.getItem('budget_profile')||'balanced';this.selectedCat=-1;this.chart=null;this.init();}init(){this.cacheElements();this.loadUI();this.bindEvents();this.renderAll();this.updateChart();}cacheElements(){this.elements={modal:document.getElementById('transactionModal'),toast:document.getElementById('toast'),themeToggle:document.getElementById('themeToggle'),searchInput:document.getElementById('searchInput'),monthlyBudget:document.getElementById('monthlyBudget'),peopleCount:document.getElementById('peopleCount'),payRent:document.getElementById('payRent'),totalBudget:document.getElementById('totalBudget'),balance:document.getElementById('balance'),savings:document.getElementById('savings'),resteAVivre:document.getElementById('resteAVivre'),transactionsList:document.getElementById('transactionsList'),suggestionList:document.getElementById('suggestionList'),categoryGrid:document.getElementById('categoryGrid'),categoryInfo:document.getElementById('categoryInfo'),transactionType:document.getElementById('transactionType'),amount:document.getElementById('amount'),description:document.getElementById('description'),modalTitle:document.getElementById('modalTitle')}}bindEvents(){this.elements.themeToggle.onclick=()=>this.toggleTheme();document.querySelectorAll('[data-profile]').forEach(b=>b.onclick=e=>this.selectProfile(e.target.dataset.profile));this.elements.searchInput.oninput=()=>this.renderTransactions();this.elements.monthlyBudget.oninput=this.elements.peopleCount.oninput=this.elements.payRent.onchange=()=>this.saveConfig();}toggleTheme(){document.body.classList.toggle('light');const isLight=document.body.classList.contains('light');localStorage.setItem('budget_theme',isLight?'light':'dark');this.elements.themeToggle.textContent=isLight?'üåô':'‚òÄÔ∏è';this.elements.themeToggle.setAttribute('aria-label',isLight?'Mode sombre':'Mode clair');this.showToast('Th√®me mis √† jour ‚ú®');}selectProfile(profile){this.profile=profile;localStorage.setItem('budget_profile',profile);document.querySelectorAll('.profile-badge').forEach(b=>b.classList.remove('active'));event.target.classList.add('active');this.renderSuggestions();this.showToast(`Profil ${profile==='balanced'?'‚öñÔ∏è √âquilibr√©':'üõ°Ô∏è S√©curit√©':''} activ√©`);}loadUI(){this.elements.monthlyBudget.value=this.monthlyBudget;this.elements.peopleCount.value=this.peopleCount;this.elements.payRent.checked=this.payRent;document.querySelector(`[data-profile="${this.profile}"]`).classList.add('active');const isLight=localStorage.getItem('budget_theme')==='light';if(isLight)document.body.classList.add('light');this.elements.themeToggle.textContent=isLight?'üåô':'‚òÄÔ∏è';}formatAr(v){return new Intl.NumberFormat('fr-FR',{minimumFractionDigits:0}).format(Math.round(v))+' Ar';}showToast(msg,type='success'){const t=this.elements.toast;t.textContent=msg;t.className=`toast ${type}`;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),3500);}getTotalBudget(){const income=this.transactions.filter(t=>t.amount>0).reduce((s,t)=>s+t.amount,0);return this.monthlyBudget+income;}updateStats(){const balance=this.transactions.reduce((s,t)=>s+t.amount,0);const resteAVivre=balance-this.savings;const minReste=50000*this.peopleCount;this.elements.totalBudget.textContent=this.formatAr(this.getTotalBudget());this.elements.balance.textContent=this.formatAr(balance);this.elements.savings.textContent=this.formatAr(this.savings);this.elements.resteAVivre.textContent=this.formatAr(resteAVivre);this.elements.resteAVivre.style.color=resteAVivre<minReste?'var(--warning)':'var(--success)';}getCategories(type){return type==='expense'?[{icon:'üçî',name:'Nourriture',color:'#ff6b6b'},{icon:'üöó',name:'Transport',color:'#4ecdc4'},{icon:'üè†',name:'Logement',color:'#95e1d3'},{icon:'üì±',name:'Internet',color:'#ffd93d'},{icon:'üí°',name:'√ânergie',color:'#f8b400'},{icon:'‚ù§Ô∏è',name:'Sant√©',color:'#ff9ff3'}]:[{icon:'üí∞',name:'Salaire',color:'#4ecdc4'},{icon:'üìà',name:'Business',color:'#ffd93d'},{icon:'üéÅ',name:'Autres',color:'#95e1d3'}];}updateCategories(){const type=this.elements.transactionType.value;const cats=this.getCategories(type);this.elements.categoryGrid.innerHTML=cats.map((c,i)=>`<div class="category-btn ${i===this.selectedCat?'active':''}" onclick="budgetPro.selectCategory(${i})" title="${c.name}" style="--bg:${c.color}20">${c.icon}</div>`).join('');this.elements.categoryInfo.textContent=this.selectedCat>=0&&this.selectedCat<cats.length?`‚úÖ ${cats[this.selectedCat].name} s√©lectionn√©e`:this.elements.transactionType.value==='expense'?'‚ö†Ô∏è Cliquez sur une ic√¥ne':'üéØ S√©lectionnez une source de revenu';}selectCategory(index){this.selectedCat=index;this.updateCategories();}openModal(){this.elements.modal.classList.add('active');this.elements.amount.value='';this.elements.description.value='';this.selectedCat=-1;this.elements.transactionType.value='expense';this.elements.modalTitle.textContent='‚ûï Nouvelle transaction';this.updateCategories();document.body.style.overflow='hidden';}closeModal(){this.elements.modal.classList.remove('active');document.body.style.overflow='';this.selectedCat=-1;}addTransaction(e){e.preventDefault();if(this.selectedCat===-1){this.showToast('‚ö†Ô∏è S√©lectionnez une cat√©gorie !','warning');return;}const type=this.elements.transactionType.value;const amount=Number(this.elements.amount.value);const desc=this.elements.description.value;const cats=this.getCategories(type);const cat=cats[this.selectedCat];let value=type==='expense'?-amount:amount;let savingsText='';if(type==='income'){const maxSavings=amount*0.2;const currentBalance=this.transactions.reduce((s,t)=>s+t.amount,0)+value-maxSavings;if(currentBalance>=50000){const savingsAdded=Math.min(maxSavings,amount*0.3);this.savings+=savingsAdded;value-=savingsAdded;savingsText=` (üíé+${this.formatAr(savingsAdded)})`;localStorage.setItem('budget_savings',this.savings);}}this.transactions.unshift({id:Date.now(),amount:value,description:`${desc}${savingsText}`,icon:cat.icon,category:cat.name,color:cat.color,date:new Date().toISOString()});localStorage.setItem('budget_transactions',JSON.stringify(this.transactions));this.closeModal();this.renderAll();this.showToast('‚úÖ Transaction enregistr√©e !');}renderTransactions(){const search=this.elements.searchInput.value.toLowerCase();const filtered=this.transactions.filter(t=>t.description.toLowerCase().includes(search)||t.category.toLowerCase().includes(search)).slice(0,12);this.elements.transactionsList.innerHTML=filtered.length?filtered.map(t=>{const isPositive=t.amount>0;return`<div class="transaction-item" onclick="budgetPro.deleteTransaction(${t.id})" style="cursor:pointer">
<div class="transaction-info">
<div class="transaction-icon" style="background:${t.color}30;box-shadow:0 4px 16px ${t.color}40">${t.icon}</div>
<div>
<strong>${t.description}</strong>
<br><small style="opacity:.8">${t.category} ¬∑ ${new Date(t.date).toLocaleDateString('fr-FR',{weekday:'short',day:'numeric',month:'short'})}</small>
</div>
</div>
<div class="transaction-amount ${isPositive?'positive':'negative'}">${isPositive?'+':''}${this.formatAr(Math.abs(t.amount))}</div>
</div>`;}).join(''):'<div style="text-align:center;padding:40px;color:rgba(255,255,255,.5)"><p>üì≠ Aucune transaction</p><p style="font-size:14px;margin-top:8px">Ajoutez votre premi√®re transaction avec le bouton ‚ûï</p></div>';}renderSuggestions(){const total=this.getTotalBudget();if(total<=0){this.elements.suggestionList.innerHTML='<div style="text-align:center;padding:20px;color:rgba(255,255,255,.5)">üí° Entrez un budget pour voir les suggestions</div>';return;}const profiles={'balanced':{Nourriture:.25,Transport:.12,Logement:this.payRent?.35:0,√âpargne:.20,Sant√©:.08},security:{Nourriture:.30,Transport:.10,Logement:this.payRent?.30:0,√âpargne:.25,Sant√©:.10},comfort:{Nourriture:.22,Transport:.15,Logement:this.payRent?.38:0,√âpargne:.15,Loisirs:.10}};const profile=profiles[this.profile];const suggestions=Object.entries(profile).filter(([_,v])=>v>0).map(([cat,pct])=>({cat,amount:total*pct}));this.elements.suggestionList.innerHTML=suggestions.map(s=>`<div class="suggestion-item">
<span style="font-weight:500">${s.cat}</span>
<strong style="color:var(--accent)">${this.formatAr(s.amount)}</strong>
</div>`).join('');}updateChart(){const ctx=document.getElementById('expensesChart').getContext('2d');const expenses=this.transactions.filter(t=>t.amount<0).reduce((acc,t)=>({...acc,[t.category]:-t.amount+(acc[t.category]||0)}),{});const labels=Object.keys(expenses);const data=Object.values(expenses);if(this.chart)this.chart.destroy();this.chart=new Chart(ctx,{type:'doughnut',data:{labels,data,datasets:[{data,backgroundColor:['#ff6b6b','#4ecdc4','#95e1d3','#ffd93d','#f8b400','#ff9ff3'],borderWidth:0,borderColor:'#fff',borderRadius:8}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom',labels:{padding:20,color:'#fff',font:{size:13}}},tooltip:{backgroundColor:'rgba(0,0,0,.9)',titleColor:'#fff',bodyColor:'#fff',callbacks:{label:ctx=>`${ctx.label}: ${this.formatAr(ctx.raw)}`}}},cutout:'65%',animation:{animateRotate:true,duration:1200}}});}renderAll(){this.updateStats();this.renderTransactions();this.renderSuggestions();this.updateChart();}deleteTransaction(id){if(!confirm('Supprimer cette transaction ?'))return;this.transactions=this.transactions.filter(t=>t.id!==id);localStorage.setItem('budget_transactions',JSON.stringify(this.transactions));this.renderAll();this.showToast('üóëÔ∏è Transaction supprim√©e');}saveConfig(){this.monthlyBudget=Number(this.elements.monthlyBudget.value)||0;this.peopleCount=Number(this.elements.peopleCount.value)||1;this.payRent=this.elements.payRent.checked;localStorage.setItem('budget_monthly',this.monthlyBudget);localStorage.setItem('budget_people',this.peopleCount);localStorage.setItem('budget_rent',this.payRent);this.renderAll();this.showToast('‚öôÔ∏è Configuration sauvegard√©e');}exportData(){const data={transactions:this.transactions,savings:this.savings,config:{monthlyBudget:this.monthlyBudget,peopleCount:this.peopleCount,payRent:this.payRent,profile:this.profile},exportDate:new Date().toISOString()};const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`budget-pro-${new Date().toISOString().split('T')[0]}.json`;document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);this.showToast('üìä Donn√©es export√©es !');}resetData(){if(!confirm('‚ö†Ô∏è Tout r√©initialiser ?\nVos transactions et param√®tres seront perdus.'))return;this.transactions=[];this.savings=0;localStorage.clear();this.renderAll();this.showToast('üßπ App r√©initialis√©e','warning');}generateReport(){const balance=this.transactions.reduce((s,t)=>s+t.amount,0);const income=this.transactions.filter(t=>t.amount>0).reduce((s,t)=>s+t.amount,0);const expenses=-this.transactions.filter(t=>t.amount<0).reduce((s,t)=>s+t.amount,0);const tauxEpargne=(this.savings/income*100).toFixed(1);this.showToast(`üìà RAPPORT AI:\nüí∞ Revenus: ${this.formatAr(income)}\nüí∏ D√©penses: ${this.formatAr(expenses)}\nüíé √âpargne: ${tauxEpargne}% (${this.formatAr(this.savings)})\n${balance>0?'‚úÖ Bonne gestion !':'‚ö†Ô∏è Sur budget !'}`);}}const budgetPro=new BudgetPro();</script>
</body>
</html>
